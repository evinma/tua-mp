(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{45:function(a,t,s){"use strict";s.r(t);var e=s(0),r=Object(e.a)({},function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{align:"center"}},[a._v("@tua-mp/cli")]),a._v(" "),s("p",{attrs:{align:"center"}},[s("a",{attrs:{href:"https://www.npmjs.com/package/@tua-mp/cli"}},[s("img",{attrs:{src:"https://img.shields.io/npm/v/@tua-mp/cli.svg",alt:"Version"}}),a._v(" "),s("img",{attrs:{src:"https://img.shields.io/npm/v/@tua-mp/cli/next.svg",alt:"Next Version"}}),a._v(" "),s("img",{attrs:{src:"https://img.shields.io/npm/l/@tua-mp/cli.svg",alt:"License"}})])]),a._v(" "),s("h2",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍","aria-hidden":"true"}},[a._v("#")]),a._v(" 介绍")]),a._v(" "),s("p",[a._v("这个包为 tua-mp 提供了一些方便的命令，可以用于一键生成项目、创建页面、创建组件、创建 api 等功能。")]),a._v(" "),s("h2",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" i -g @tua-mp/cli\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ yarn global add @tua-mp/cli\n")])])]),s("h2",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用")]),a._v(" "),s("h3",{attrs:{id:"初始化项目-init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化项目-init","aria-hidden":"true"}},[a._v("#")]),a._v(" 初始化项目 "),s("code",[a._v("init")])]),a._v(" "),s("p",[a._v("这个命令代理了 vue-cli v2，所以用法也一样...")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ tuamp init "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("template-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("project-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h3",{attrs:{id:"添加接口命令-add-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加接口命令-add-api","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加接口命令 "),s("code",[a._v("add api")])]),a._v(" "),s("p",[a._v("这个命令将添加一个新文件 "),s("code",[a._v("<name>.js")]),a._v(" 到 "),s("code",[a._v("src/apis/")]),a._v(" 下，并且如果不存在 "),s("code",[a._v("src/apis/index.js")]),a._v(" 则会自动创建。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 添加小程序端 api")]),a._v("\n$ tuamp add api "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ tuamp a api "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("p",[a._v("该命令会自动在 "),s("code",[a._v("src/apis/index.js")]),a._v(" 中导出该 "),s("code",[a._v("api")]),a._v("，例如 "),s("code",[a._v("<name>")]),a._v(" 为 "),s("code",[a._v("foo-bar")]),a._v("\b，那么导出的接口名称为 "),s("code",[a._v("fooBarApi")]),a._v("（已转成小驼峰，并在结尾加上 "),s("code",[a._v("Api")]),a._v("）。")]),a._v(" "),s("h3",{attrs:{id:"添加页面命令-add-page"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加页面命令-add-page","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加页面命令 "),s("code",[a._v("add page")])]),a._v(" "),s("p",[a._v("这个命令将添加一个新文件夹 "),s("code",[a._v("<name>")]),a._v(" 到 "),s("code",[a._v("src/pages/")]),a._v(" 下，并且自动添加 "),s("code",[a._v("pages/<name>/<name>")]),a._v(" 到 "),s("code",[a._v("src/app/app.json")]),a._v(" 中。")]),a._v(" "),s("p",[a._v("并且如果页面以"),s("strong",[a._v("连字符")]),a._v("命名，那么相关的 "),s("code",[a._v(".vue")]),a._v(" 文件会被转成"),s("strong",[a._v("大驼峰")]),a._v("风格。")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("└─ pages\n   ├─ ...\n   └─ a-b           // 连字符\n      ├─ AB.vue     // 大驼峰\n      └─ index.js\n")])])]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 添加小程序端 page")]),a._v("\n$ tuamp add page "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ tuamp a page "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("p",[a._v("该命令会自动读取 "),s("code",[a._v("src/app/app.json")]),a._v(" 中的 "),s("code",[a._v("pages")]),a._v(" 字段，并将新页面加入。")]),a._v(" "),s("h3",{attrs:{id:"添加组件命令-add-comp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加组件命令-add-comp","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加组件命令 "),s("code",[a._v("add comp")])]),a._v(" "),s("p",[a._v("由于组件一般分为两种：")]),a._v(" "),s("ul",[s("li",[a._v("全局组件（位于 "),s("code",[a._v("src/comps/")]),a._v(" 下）")]),a._v(" "),s("li",[a._v("页面组件（位于 "),s("code",[a._v("src/pages/foo-bar/comps/")]),a._v(" 下）")])]),a._v(" "),s("p",[a._v("所以这个命令有两种用法，添加可选的 "),s("code",[a._v("-g, --global")]),a._v(" 参数表示添加全局组件，将添加一个新文件夹 "),s("code",[a._v("<name>")]),a._v(" 到 "),s("code",[a._v("src/comps/")]),a._v(" 下，否则会进行交互式询问模板文件夹的路径。")]),a._v(" "),s("p",[a._v("组件建议都使用"),s("strong",[a._v("大驼峰")]),a._v("命名风格")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("└─ comps\n   ├─ ...\n   └─ TuaImage          // 大驼峰\n      ├─ TuaImage.vue   // 大驼峰\n      └─ index.js\n")])])]),s("ul",[s("li",[a._v("全局添加小程序端 comp(-g, --global)")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ tuamp add comp "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" --global\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ tuamp a comp "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -g\n")])])]),s("ul",[s("li",[a._v("局部添加小程序端 comp")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ tuamp add comp "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ tuamp a comp "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("blockquote",[s("p",[a._v("注意使用 "),s("code",[a._v("<Tab>")]),a._v(" 键补全路径，输入不存在的文件夹时会自动创建。")])]),a._v(" "),s("h3",{attrs:{id:"导出模板命令-eject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导出模板命令-eject","aria-hidden":"true"}},[a._v("#")]),a._v(" 导出模板命令 "),s("code",[a._v("eject")]),a._v(" "),s("Badge",{attrs:{text:"0.3.0+"}})],1),a._v(" "),s("p",[a._v("这个命令将包中的默认模板导出到 "),s("code",[a._v(".templates/")]),a._v(" 中。")]),a._v(" "),s("p",[a._v("这样通过修改"),s("code",[a._v(".templates/")]),a._v(" 下的模板文件，即可实现自定义模板功能。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ tuamp "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("eject")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ tuamp e\n")])])]),s("h3",{attrs:{id:"生成接口声明命令-declare"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成接口声明命令-declare","aria-hidden":"true"}},[a._v("#")]),a._v(" 生成接口声明命令 "),s("code",[a._v("declare")]),a._v(" "),s("Badge",{attrs:{text:"0.4.0+"}})],1),a._v(" "),s("p",[a._v("这个命令将读取导出的 apis 然后自动生成 "),s("code",[a._v("index.d.ts")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ tuamp "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("declare")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("apisPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ tuamp d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("apisPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("ul",[s("li",[s("code",[a._v("apisPath")]),a._v(" 默认值为 "),s("code",[a._v("src/apis/index.js")])]),a._v(" "),s("li",[s("code",[a._v("index.d.ts")]),a._v(" 将生成在 "),s("code",[a._v("apisPath")]),a._v(" 同级目录下")])]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("index.d.ts")]),a._v(" 已存在的情况下，默认会提示是否覆盖，每次都要手动确认有点儿不方便。所以添加了一个参数 "),s("code",[a._v("--yes, -y")]),a._v("，表示默认覆盖文件。"),s("Badge",{attrs:{text:"0.5.0+"}})],1),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ tuamp "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("declare")]),a._v(" --yes "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("apisPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# OR")]),a._v("\n$ tuamp d -y "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("apisPath"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("p",[a._v("由于使用 "),s("code",[a._v("require")]),a._v(" 读取导出 apis 对象的文件，所以可能会碰到 "),s("code",[a._v("alias")]),a._v(" 问题。例如项目中设置了 "),s("code",[a._v("@")]),a._v(" 作为 "),s("code",[a._v("./src/")]),a._v(" 的别名。虽然 "),s("code",[a._v("@tua-mp/cli")]),a._v(" 已内置了一些 "),s("code",[a._v("alias")]),a._v("，但你仍然可以自由配置。")]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("tua.config.js")]),a._v(" 中的 "),s("code",[a._v("alias")]),a._v(" 选项会透传给 "),s("a",{attrs:{href:"https://github.com/tleunen/babel-plugin-module-resolver",target:"_blank",rel:"noopener noreferrer"}},[a._v("babel-plugin-module-resolver"),s("OutboundLink")],1),a._v("，例如将 "),s("code",[a._v("foobar")]),a._v(" 指向 './src/foobar' 可以这么配置：")]),a._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// tua.config.js")]),a._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    alias"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'foobar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./src/foobar'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置")]),a._v(" "),s("p",[a._v("配置文件和 "),s("code",[a._v("@tua-mp/service")]),a._v(" 一样，都是使用 "),s("code",[a._v("tua.config.js")]),a._v("。")]),a._v(" "),s("h3",{attrs:{id:"templatedir"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#templatedir","aria-hidden":"true"}},[a._v("#")]),a._v(" templateDir "),s("Badge",{attrs:{text:"0.3.0+"}})],1),a._v(" "),s("ul",[s("li",[a._v("类型："),s("code",[a._v("String")])]),a._v(" "),s("li",[a._v("默认值："),s("code",[a._v(".templates")])])]),a._v(" "),s("p",[a._v("自定义模板的路径。")]),a._v(" "),s("h3",{attrs:{id:"alias"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#alias","aria-hidden":"true"}},[a._v("#")]),a._v(" alias "),s("Badge",{attrs:{text:"0.4.0+"}})],1),a._v(" "),s("ul",[s("li",[a._v("类型："),s("code",[a._v("Object")])]),a._v(" "),s("li",[a._v("默认值："),s("a",{attrs:{href:"https://github.com/tuateam/tua-mp/blob/master/packages/tua-mp-cli/lib/constants.js",target:"_blank",rel:"noopener noreferrer"}},[a._v("请点击这里查看源码"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("设置路径别名对象。")]),a._v(" "),s("p",[s("strong",[a._v("读取模板的优先级逻辑是：")])]),a._v(" "),s("ol",[s("li",[a._v("首先尝试使用 "),s("code",[a._v("tua.config.js")]),a._v(" 中的 "),s("code",[a._v("templateDir")]),a._v(" 字段")]),a._v(" "),s("li",[a._v("接着尝试读取 "),s("code",[a._v(".templates/")])]),a._v(" "),s("li",[a._v("最后读取默认模板")])]),a._v(" "),s("h2",{attrs:{id:"gif-示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gif-示例","aria-hidden":"true"}},[a._v("#")]),a._v(" gif 示例")]),a._v(" "),s("h3",{attrs:{id:"tuamp-add-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tuamp-add-api","aria-hidden":"true"}},[a._v("#")]),a._v(" "),s("code",[a._v("tuamp add api")])]),a._v(" "),s("p",[a._v("添加 api")]),a._v(" "),s("p",[s("img",{attrs:{src:a.$withBase("/cli/add-api.gif"),alt:"add api"}})]),a._v(" "),s("h3",{attrs:{id:"tuamp-add-page"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tuamp-add-page","aria-hidden":"true"}},[a._v("#")]),a._v(" "),s("code",[a._v("tuamp add page")])]),a._v(" "),s("p",[a._v("添加页面")]),a._v(" "),s("p",[s("img",{attrs:{src:a.$withBase("/cli/add-page.gif"),alt:"add page"}})]),a._v(" "),s("h3",{attrs:{id:"tuamp-add-comp-g"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tuamp-add-comp-g","aria-hidden":"true"}},[a._v("#")]),a._v(" "),s("code",[a._v("tuamp add comp -g")])]),a._v(" "),s("p",[a._v("添加全局组件")]),a._v(" "),s("p",[s("img",{attrs:{src:a.$withBase("/cli/add-comp-global.gif"),alt:"add comp -g"}})]),a._v(" "),s("h3",{attrs:{id:"tuamp-add-comp"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tuamp-add-comp","aria-hidden":"true"}},[a._v("#")]),a._v(" "),s("code",[a._v("tuamp add comp")])]),a._v(" "),s("p",[a._v("注意这里用的是本地模板 "),s("code",[a._v(".templates/comp")])]),a._v(" "),s("p",[s("img",{attrs:{src:a.$withBase("/cli/add-comp-local.gif"),alt:"add comp"}})]),a._v(" "),s("h3",{attrs:{id:"tuamp-eject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tuamp-eject","aria-hidden":"true"}},[a._v("#")]),a._v(" "),s("code",[a._v("tuamp eject")]),a._v(" "),s("Badge",{attrs:{text:"0.3.0+"}})],1),a._v(" "),s("p",[a._v("导出默认模板")]),a._v(" "),s("p",[s("img",{attrs:{src:a.$withBase("/cli/eject.gif"),alt:"eject"}})]),a._v(" "),s("h3",{attrs:{id:"tuamp-add-api-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tuamp-add-api-2","aria-hidden":"true"}},[a._v("#")]),a._v(" "),s("code",[a._v("tuamp add api")])]),a._v(" "),s("ul",[s("li",[a._v("使用自定义模板 "),s("Badge",{attrs:{text:"0.3.0+"}})],1),a._v(" "),s("li",[a._v("覆盖已有 api")])]),a._v(" "),s("p",[s("img",{attrs:{src:a.$withBase("/cli/custom-template.gif"),alt:"custom template"}})])])},[],!1,null,null,null);t.default=r.exports}}]);